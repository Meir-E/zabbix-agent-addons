<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.0</version>
    <date>2021-06-19T10:43:09Z</date>
    <groups>
        <group>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template_UPS_CyberPower_SNMP</template>
            <name>Template_UPS_CyberPower_SNMP</name>
            <templates>
                <template>
                    <name>Template_SNMP_Device</name>
                </template>
            </templates>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Battery</name>
                </application>
                <application>
                    <name>Information</name>
                </application>
                <application>
                    <name>Input</name>
                </application>
                <application>
                    <name>Output</name>
                </application>
                <application>
                    <name>RMCARD</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Capacity</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.2.1.0</snmp_oid>
                    <key>battery.capacity</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>%</units>
                    <description>CPS-MIB::upsAdvanceBatteryCapacity - the battery capacity expressed in percentage</description>
                    <applications>
                        <application>
                            <name>Battery</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;10</expression>
                            <name>Battery charge is less than 10%</name>
                            <priority>HIGH</priority>
                        </trigger>
                        <trigger>
                            <expression>{last()}&lt;20</expression>
                            <name>Battery charge is less than 20%</name>
                            <priority>WARNING</priority>
                            <dependencies>
                                <dependency>
                                    <name>Battery charge is less than 10%</name>
                                    <expression>{Template_UPS_CyberPower_SNMP:battery.capacity.last()}&lt;10</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Remaining Runtime</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.2.4.0</snmp_oid>
                    <key>battery.RemainingRuntime</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>min</units>
                    <description>CPS-MIB::upsAdvanceBatteryRunTimeRemaining - the UPS battery remaining run time</description>
                    <applications>
                        <application>
                            <name>Battery</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.00016666666666</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Replace Indicator</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.2.5.0</snmp_oid>
                    <key>battery.ReplaceIndicator</key>
                    <delay>1h</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <description>CPS-MIB::upsAdvanceBatteryReplaceIndicator - this value indicates if UPS batteries need to be replaced</description>
                    <applications>
                        <application>
                            <name>Battery</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>CyberPower UPS Battery Replacement Indicator</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>Battery should be replaced</name>
                            <priority>AVERAGE</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Battery status</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.1.1.0</snmp_oid>
                    <key>battery.Status</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <description>CPS-MIB::upsBaseBatteryStatus - the UPS battery status. A batteryLow(3) value means the battery will be exhausted soon under the current load. The amount of low battery run time can be configured by the upsAdvanceConfigLowBatteryRunTime.</description>
                    <applications>
                        <application>
                            <name>Battery</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>CyberPower UPS Battery Status</name>
                    </valuemap>
                </item>
                <item>
                    <name>Time on Battery</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.1.2.0</snmp_oid>
                    <key>battery.TimeOnBattery</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>min</units>
                    <description>CPS-MIB::upsBaseBatteryTimeOnBattery - the UPS wasted battery time since the UPS has transfered to backup mode</description>
                    <applications>
                        <application>
                            <name>Battery</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.00016666666666</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Voltage Rating</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.2.8.0</snmp_oid>
                    <key>battery.VoltageRating</key>
                    <delay>1h</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <units>V</units>
                    <description>CPS-MIB::upsAdvanceBatteryVoltageRating - the DC voltage rating of the battery set</description>
                    <applications>
                        <application>
                            <name>Battery</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Last Fail Cause</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.3.2.5.0</snmp_oid>
                    <key>input.FailCause</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <description>CPS-MIB::upsAdvanceInputLineFailCause - The reason of UPS power failure. This value is set to: - noTransfer(1), if UPS is in utility mode. - highLineVoltage(2), if UPS switch to battery mode by reason of input voltage over the high transfer vloltage. - brownout(3), if UPS switch to battery mode by reason of input voltage under the low transfer vloltage. - selfTest(4), if the UPS was commanded to do a self test.</description>
                    <applications>
                        <application>
                            <name>Input</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>CyberPower UPS Input Fail Cause</name>
                    </valuemap>
                </item>
                <item>
                    <name>Input frequency</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.3.2.4.0</snmp_oid>
                    <key>input.Frequency</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>Hz</units>
                    <description>CPS-MIB::upsAdvanceInputFrequency - the input line frequency in 1/10 Hz</description>
                    <applications>
                        <application>
                            <name>Input</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.1</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Input status</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.3.2.6.0</snmp_oid>
                    <key>input.Status</key>
                    <delay>60s</delay>
                    <history>30d</history>
                    <description>CPS-MIB::upsAdvanceInputStatus - display the present status of the utility power supplied to the UPS</description>
                    <applications>
                        <application>
                            <name>Input</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>CyberPower UPS Input Status</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>Issue on power input</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Input voltage</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.3.2.1.0</snmp_oid>
                    <key>input.Voltage</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>V</units>
                    <description>CPS-MIB::upsAdvanceInputLineVoltage - the input line voltage in 1/10 VAC</description>
                    <applications>
                        <application>
                            <name>Input</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.1</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Output frequency</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.4.2.2.0</snmp_oid>
                    <key>output.Frequency</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>Hz</units>
                    <description>CPS-MIB::upsAdvanceOutputFrequency - the UPS output frequency in 1/10 Hz</description>
                    <applications>
                        <application>
                            <name>Output</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.1</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Load (%)</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.4.2.3.0</snmp_oid>
                    <key>output.Load</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>%</units>
                    <description>CPS-MIB::upsAdvanceOutputLoad - the UPS output load expressed in percentage</description>
                    <applications>
                        <application>
                            <name>Output</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;80</expression>
                            <name>High output power load</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Load (watts)</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.4.2.5.0</snmp_oid>
                    <key>output.LoadW</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>!W</units>
                    <description>CPS-MIB::upsAdvanceOutputPower - the total output active power of the UPS system in W</description>
                    <applications>
                        <application>
                            <name>Output</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Output status</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.4.1.1.0</snmp_oid>
                    <key>output.Status</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <description>CPS-MIB::upsBaseOutputStatus - the UPS output status</description>
                    <applications>
                        <application>
                            <name>Output</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>CyberPower UPS Output Status</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last()}=3</expression>
                            <name>UPS is on battery</name>
                            <priority>AVERAGE</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Output voltage</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.4.2.1.0</snmp_oid>
                    <key>output.Voltage</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>V</units>
                    <description>CPS-MIB::upsAdvanceOutputVoltage - the UPS output voltage in 1/10 VAC</description>
                    <applications>
                        <application>
                            <name>Output</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.1</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Firmware Revision</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.1.2.4.0</snmp_oid>
                    <key>rmcard.FirmwareRevision</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>CPS-MIB::upsAdvanceIdentAgentFirmwareRevision - the SNMP agent firmware revision</description>
                    <applications>
                        <application>
                            <name>RMCARD</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Firmware Version</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.1.2.1.0</snmp_oid>
                    <key>ups.info.FirmwareVersion</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>CPS-MIB::upsAdvanceIdentFirmwareRevision - the UPS firmware revision</description>
                    <applications>
                        <application>
                            <name>Information</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Load Power</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.1.2.7.0</snmp_oid>
                    <key>ups.info.LoadPower</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <units>!W</units>
                    <description>CPS-MIB::upsAdvanceIdentLoadPower - the power rating(Watts) of the UPS</description>
                    <applications>
                        <application>
                            <name>Information</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Model</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.1.1.1.0</snmp_oid>
                    <key>ups.info.Model</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>CPS-MIB::upsBaseIdentModel - the UPS model name</description>
                    <inventory_link>MODEL</inventory_link>
                    <applications>
                        <application>
                            <name>Information</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Name</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.1.1.2.0</snmp_oid>
                    <key>ups.info.Name</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>CPS-MIB::upsBaseIdentName - the UPS identified name could be set by the administrator</description>
                    <inventory_link>NAME</inventory_link>
                    <applications>
                        <application>
                            <name>Information</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Power Rating</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.1.2.6.0</snmp_oid>
                    <key>ups.info.PowerRating</key>
                    <delay>1h</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <units>!VA</units>
                    <description>CPS-MIB::upsAdvanceIdentPowerRating - the Volt-Amp rating of the UPS</description>
                    <applications>
                        <application>
                            <name>Information</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Temperature</name>
                    <type>SNMP_AGENT</type>
                    <snmp_oid>1.3.6.1.4.1.3808.1.1.1.2.2.3.0</snmp_oid>
                    <key>ups.temperature</key>
                    <delay>120s</delay>
                    <history>30d</history>
                    <units>°C</units>
                    <applications>
                        <application>
                            <name>Information</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.1</params>
                        </step>
                    </preprocessing>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;42</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>{last()}&lt;40</recovery_expression>
                            <name>UPS temperature is {ITEM.LASTVALUE1}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$SNMP_COMMUNITY}</macro>
                    <value>public</value>
                </macro>
            </macros>
        </template>
    </templates>
    <value_maps>
        <value_map>
            <name>CyberPower UPS Battery Replacement Indicator</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>noBatteryNeedsReplacing</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>batteryNeedsReplacing</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>CyberPower UPS Battery Status</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>unknown</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>batteryNormal</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>batteryLow</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>CyberPower UPS Input Fail Cause</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>noTransfer</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>highLineVoltage</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>brownout</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>selfTest</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>CyberPower UPS Input Status</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>normal</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>overVoltage</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>underVoltage</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>frequencyFailure</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>blackout</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>CyberPower UPS Output Status</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>unknown</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>onLine</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>onBattery</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>onBoost</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>onSleep</newvalue>
                </mapping>
                <mapping>
                    <value>6</value>
                    <newvalue>off</newvalue>
                </mapping>
                <mapping>
                    <value>7</value>
                    <newvalue>rebooting</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
